<idea-plugin allow-bundled-update="true">
  <id>openjml</id>
  <name>OpenJML</name>
  <category>Languages</category>
  <description><![CDATA[
  ]]>
  </description>
  <depends>com.intellij.modules.xml</depends>
<!--  <depends>com.intellij.modules.spellchecker</depends>-->
  <depends>org.intellij.intelliLang</depends>
<!--  <depends>com.intellij.modules.regexp</depends>-->
  <resource-bundle>messages.OpenJMLBundle</resource-bundle>
  <vendor>Pawel Kierat</vendor>

  <idea-version since-build="243" until-build="251.*"/>

  <extensions defaultExtensionNs="com.intellij">
    <fileType
      name="JML"
      implementationClass="dev.kierat.plugins.openjml.psi.JMLFileType"
      fieldName="INSTANCE"
      language="JML"
      extensions="jml"/>
<!--
    <lang.syntaxHighlighterFactory
      language="JML"
      implementationClass="dev.kierat.plugins.openjml.psi.JMLSyntaxHighlighterFactory"/>
    <lang.parserDefinition
      language="JML"
      implementationClass="dev.kierat.plugins.openjml.psi.JMLParserDefinition"/>
    <lang.commenter
      language="JML"
      implementationClass="dev.kierat.plugins.openjml.psi.JMLCommenter"/>
    <lang.psiStructureViewFactory
      language="JML"
      implementationClass="dev.kierat.plugins.openjml.psi.structure.JMLStructureViewFactory"/>
    <lang.formatter
      language="JML"
      implementationClass="dev.kierat.plugins.openjml.psi.formatter.JMLFormattingModelBuilder"/>
    <annotator
      language="JML"
      implementationClass="dev.kierat.plugins.openjml.psi.annotator.JMLAnnotator"/>
    <lang.foldingBuilder
      language="JML"
      implementationClass="dev.kierat.plugins.openjml.psi.JMLFoldingBuilder"/>
    <langCodeStyleSettingsProvider
      implementation="dev.kierat.plugins.openjml.psi.formatter.JMLLanguageCodeStyleSettingsProvider"/>
    <codeStyleSettingsProvider
      implementation="dev.kierat.plugins.openjml.psi.formatter.JMLCodeStyleSettingsProvider"/>
    <lang.findUsagesProvider
      language="JML"
      implementationClass="dev.kierat.plugins.openjml.psi.JMLFindUsagesProvider"/>
    <colorSettingsPage
      implementation="dev.kierat.plugins.openjml.psi.JMLColorsPage"/>
    <psi.referenceContributor
      language="JML"
      implementation="dev.kierat.plugins.openjml.steps.reference.OpenJMLReferenceContributor"/>
-->

<!--    <localInspection language="JML" shortName="CucumberUndefinedStep" bundle="messages.OpenJMLBundle"
                     key="openjml.inspection.undefined.step.name" groupKey="openjml.inspection.group.name" enabledByDefault="true"
                     level="WARNING"
                     implementationClass="dev.kierat.plugins.openjml.inspections.CucumberStepInspection"/>

    <localInspection language="JML" shortName="CucumberExamplesColon" bundle="messages.CucumberBundle"
                     key="inspection.missed.colon.example.name" groupKey="openjml.inspection.group.name" enabledByDefault="true"
                     level="ERROR" implementationClass="dev.kierat.plugins.openjml.inspections.CucumberExamplesColonInspection"/>

    <localInspection language="JML" shortName="CucumberMissedExamples" bundle="messages.CucumberBundle"
                     key="inspection.missed.example.name" groupKey="openjml.inspection.group.name" enabledByDefault="true" level="ERROR"
                     implementationClass="dev.kierat.plugins.openjml.inspections.CucumberMissedExamplesInspection"/>

    <localInspection language="JML" shortName="CucumberTableInspection" bundle="messages.CucumberBundle"
                     key="inspection.table.name" groupKey="openjml.inspection.group.name" enabledByDefault="true"
                     editorAttributes="NOT_USED_ELEMENT_ATTRIBUTES"
                     level="WARNING" implementationClass="dev.kierat.plugins.openjml.inspections.CucumberTableInspection"/>

    <localInspection language="JML" shortName="GherkinBrokenTableInspection" bundle="messages.CucumberBundle"
                     key="inspection.gherkin.table.is.broken.name" groupKey="openjml.inspection.group.name" enabledByDefault="true"
                     level="ERROR" implementationClass="dev.kierat.plugins.openjml.inspections.GherkinBrokenTableInspection"/>

    <localInspection language="JML" shortName="GherkinMisplacedBackground" bundle="messages.CucumberBundle"
                     key="inspection.gherkin.background.after.scenario.name" groupKey="openjml.inspection.group.name"
                     enabledByDefault="true"
                     level="ERROR" implementationClass="dev.kierat.plugins.openjml.inspections.GherkinMisplacedBackgroundInspection"/>

    <localInspection language="JML" shortName="GherkinScenarioToScenarioOutline" bundle="messages.CucumberBundle"
                     key="inspection.gherkin.scenario.with.examples.section.name" groupKey="openjml.inspection.group.name"
                     enabledByDefault="true" level="ERROR"
                     implementationClass="dev.kierat.plugins.openjml.inspections.GherkinScenarioToScenarioOutlineInspection"/>
                     -->

<!--
    <completion.contributor
      language="JML"
      implementationClass="dev.kierat.plugins.openjml.completion.OpenJMLCompletionContributor"/>

    <enterHandlerDelegate implementation="dev.kierat.plugins.openjml.codeinsight.OpenJMLEnterHandler"/>
    <typedHandler implementation="dev.kierat.plugins.openjml.codeinsight.JMLTypedHandler"/>

    <spellchecker.support
      language="JML"
      implementationClass="dev.kierat.plugins.openjml.spellchecker.JMLSpellcheckerStrategy"/>
    <lang.inspectionSuppressor
      language="JML"
      implementationClass="dev.kierat.plugins.openjml.inspections.model.GherkinInspectionSuppressor"/>

    <liveTemplateContext
      contextId="CUCUMBER_FEATURE_FILE"
      implementation="dev.kierat.plugins.openjml.GherkinLiveTemplateContextType"/>

    <extendWordSelectionHandler
      implementation="dev.kierat.plugins.openjml.actions.GherkinStepParameterSelectioner"/>

    <gotoRelatedProvider
      implementation="dev.kierat.plugins.openjml.navigation.CucumberGoToRelatedProvider"/>

    <renameHandler
      implementation="dev.kierat.plugins.openjml.psi.refactoring.rename.GherkinParameterRenameHandler"/>
    <renameHandler
      implementation="dev.kierat.plugins.openjml.psi.refactoring.rename.GherkinStepRenameHandler"/>


    <renamePsiElementProcessor
      implementation="dev.kierat.plugins.openjml.psi.refactoring.rename.GherkinStepRenameProcessor"
      order="first"/>

    <additionalTextAttributes
      scheme="Default"
      file="colorSchemes/JMLDefault.xml"/>
    <additionalTextAttributes
      scheme="Darcula"
      file="colorSchemes/JMLDarcula.xml"/>

    <runLineMarkerContributor
      id="scenarioRunLineMarkerContributor"
      language="JML"
      implementationClass="dev.kierat.plugins.openjml.run.OpenJMLRunLineMarkerContributor"/>
-->

    <intentionAction>
      <language>JAVA</language>
      <className>dev.kierat.plugins.openjml.intentions.GenerateJMLFileIntention</className>
      <categoryKey>intention.family.name.openjml</categoryKey>
    </intentionAction>
<!--
    <multiHostInjector
      implementation="dev.kierat.plugins.openjml.injector.JMLLanguageInjector"/>
    <lang.elementManipulator
      forClass="dev.kierat.plugins.openjml.psi.GherkinPystring"
      implementationClass="dev.kierat.plugins.openjml.GherkinPyStringManipulator"/>
-->
  </extensions>

  <extensionPoints>
    <extensionPoint
      qualifiedName="dev.kierat.plugins.openjml.openjmlExtensionPoint"
      interface="dev.kierat.plugins.openjml.OpenJMLExtensionPoint"
      dynamic="true"/>
    <extensionPoint
      qualifiedName="dev.kierat.plugins.openjml.injector.injectorExtensionPoint"
      interface="dev.kierat.plugins.openjml.injector.JMLInjectorExtensionPoint"
      dynamic="true"/>
  </extensionPoints>
</idea-plugin>
